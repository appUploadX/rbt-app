(self.webpackChunkrbt_1=self.webpackChunkrbt_1||[]).push([[8796],{8796:(e,t,n)=>{"use strict";n.r(t),n.d(t,{SignatureUploadPageModule:()=>g});var o=n(6274),r=n(4988),i=n(4683),a=n(3991),s=n(1855),c=n(3606),u=n(427),l=n(721);const d=[{path:"",component:(()=>{class e{constructor(e,t,n,o,r,i,a){this.router=e,this.postPvd=t,this.toastController=n,this.menuCtrl=o,this.alertController=r,this.someComponent=i,this.plt=a}ngOnInit(){this.getSign()}backButton(){this.router.navigate(["/profile"])}signChange(e){var t=$("input[type=file]").get(0).files[0];if(t){var n=new FileReader;n.onload=function(){$("#output").attr("src",n.result)},n.readAsDataURL(t)}}getSign(){return new Promise(e=>{let t={action:"fetchSign",ucode:localStorage.getItem("UCODE"),utype:localStorage.getItem("UTYPE")};this.postPvd.postData(t,localStorage.getItem("HOMELINK")).subscribe(e=>{$("#output").attr("src",e.sign)})})}saveSignature(){if(this.plt.is("ios"))var e="ios";else e=this.plt.is("android")?"android":"APP";var t=new FormData,n=$("#signature")[0].files;if(n.length>0){var o=localStorage.getItem("HOMELINK").slice(0,-1)+"WithEmails/EmeUploadSignature";t.append("action","save"),t.append("ucode",localStorage.getItem("UCODE")),t.append("file",n[0]),t.append("plt",e),$.ajax({url:o,type:"POST",dataType:"json",data:t,contentType:!1,processData:!1,success:function(e){"ok"==e.status?(function(e){(0,s.mG)(this,void 0,void 0,function*(){const e=document.createElement("ion-toast");return e.message="<center><center>Signature upload successful.<center></center>",e.duration=2e3,e.color="success",document.body.appendChild(e),e.present()})}(),setTimeout(function(){$("#signature").val(""),$("#saveSignature").removeAttr("disabled")},3e3)):($("#saveSignature").removeAttr("disabled"),r("<center>Error occured!<center>"))}})}else r("<center>No file selected!<center>");function r(e){return(0,s.mG)(this,void 0,void 0,function*(){const t=document.createElement("ion-toast");return t.message="<center>"+e+"</center>",t.duration=2e3,t.color="danger",document.body.appendChild(t),t.present()})}}doRefresh(e){setTimeout(()=>{this.getSign(),e.target.complete()},2e3)}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(a.F0),c.Y36(u.B),c.Y36(i.yF),c.Y36(i._q),c.Y36(i.Br),c.Y36(l.y),c.Y36(i.t4))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-signature-upload"]],decls:19,vars:0,consts:[["slot","start"],["id","back",3,"click"],["name","chevron-back-outline",1,"return"],["slot","fixed",3,"ionRefresh"],["clas","file_input_wrap"],["type","file","accept","image/*","id","signature","hidden","true",1,"hide",3,"change"],["for","signature",1,"btn","btn-large"],["name","image"],["id","output","src","","height","150","width","250"],["expand","block","color","secondary","id","saveSignature","size","small",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-buttons",0),c.TgZ(3,"ion-button",1),c.NdJ("click",function(){return t.backButton()}),c._UZ(4,"ion-icon",2),c.TgZ(5,"ion-label"),c._uU(6,"Back"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"ion-content"),c.TgZ(8,"ion-refresher",3),c.NdJ("ionRefresh",function(e){return t.doRefresh(e)}),c._UZ(9,"ion-refresher-content"),c.qZA(),c.TgZ(10,"ion-card"),c.TgZ(11,"div",4),c.TgZ(12,"input",5),c.NdJ("change",function(e){return t.signChange(e)}),c.qZA(),c.TgZ(13,"label",6),c._UZ(14,"ion-icon",7),c._uU(15," Upload a signaure"),c.qZA(),c.qZA(),c._UZ(16,"img",8),c.qZA(),c.TgZ(17,"ion-button",9),c.NdJ("click",function(){return t.saveSignature()}),c._uU(18,"Save"),c.qZA(),c.qZA())},directives:[i.Gu,i.sr,i.Sm,i.YG,i.gu,i.Q$,i.W2,i.nJ,i.Wo,i.PM],styles:[".hide[_ngcontent-%COMP%]{display:none}.btn[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;margin-bottom:0;font-size:14px;line-height:20px;color:#333;text-align:center;vertical-align:middle;cursor:pointer;border:1px solid #ddd;box-shadow:2px 2px 10px #eee;border-radius:4px}"]}),e})()}];let p=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[a.Bz.forChild(d)],a.Bz]}),e})(),g=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[o.ez,r.u5,i.Pc,p]]}),e})()}}]);